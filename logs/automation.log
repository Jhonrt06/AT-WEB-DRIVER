2025-05-24 16:51:31,724 - INFO - Starting the purchase flow...
2025-05-24 16:51:33,849 - INFO - Opening Amazon...
2025-05-24 16:51:34,761 - INFO - Navigated to URL: https://www.amazon.com.mx/
2025-05-24 16:51:35,763 - INFO - Clicking on the login button...
2025-05-24 16:51:35,763 - INFO - \U0001f50d Waiting for element '#nav-link-accountList' to be clickable...
2025-05-24 16:51:36,574 - INFO - \u2705 Clicked on #nav-link-accountList
2025-05-24 16:51:37,581 - INFO - Login
2025-05-24 16:51:38,115 - INFO - \U0001f4e7 Email entered.
2025-05-24 16:51:38,115 - INFO - \U0001f50d Waiting for element '#continue' to be clickable...
2025-05-24 16:51:38,672 - INFO - \u2705 Clicked on #continue
2025-05-24 16:51:40,271 - INFO - \U0001f512 Password entered.
2025-05-24 16:51:40,271 - INFO - \U0001f50d Waiting for element '#signInSubmit' to be clickable...
2025-05-24 16:51:40,834 - INFO - \u2705 Clicked on #signInSubmit
2025-05-24 16:51:40,834 - INFO - \u2705 Login process completed.
2025-05-24 16:51:41,836 - INFO - Verifying login...
2025-05-24 16:51:41,851 - INFO - Text found in '#nav-link-accountList': 'Hola projects Cuenta y Listas'
2025-05-24 16:51:41,851 - INFO - \u2705 Login confirmed. Label now shows: Hola projects Cuenta y Listas
2025-05-24 16:51:42,853 - INFO - Verify and Click on the hamburger menu...
2025-05-24 16:51:42,853 - INFO - \U0001f50d Waiting for element '#nav-hamburger-menu' to be clickable...
2025-05-24 16:51:43,413 - INFO - \u2705 Clicked on #nav-hamburger-menu
2025-05-24 16:51:44,420 - INFO - Clicking on the Electronics option...
2025-05-24 16:51:44,458 - INFO - \u2705 Clicked element with exact text: "Electrónicos"
2025-05-24 16:51:45,469 - INFO - \U0001f50d Trying to click "Televisión y Video" from hamburger menu...
2025-05-24 16:51:50,480 - WARNING - \u26a0\ufe0f Normal click failed for "Televisión y Video", retrying with force=True: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#hmenu-content a.hmenu-item").filter(has_text="Televisión y Video").first
    - locator resolved to <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
    - retrying click action
      - waiting 100ms
    10 × waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms

2025-05-24 16:51:51,302 - INFO - \u2705 Forced click succeeded for "Televisión y Video"
2025-05-24 16:51:53,049 - INFO - \u2705 Clicked element with label: "DE 48" A 55""
2025-05-24 16:51:54,374 - INFO - \u2705 Clicked first product: "$4,909.38"
2025-05-24 16:51:55,378 - INFO - \U0001f50d Waiting for element '#add-to-cart-button' to be clickable...
2025-05-24 16:51:56,167 - INFO - \u2705 Clicked on #add-to-cart-button
2025-05-24 16:51:57,192 - INFO - \u2705 Warranty popup not visible.
2025-05-24 16:51:58,208 - INFO - \U0001f6d2 Product added to cart. Cart count: 4
2025-05-24 16:51:58,208 - INFO - \U0001f7e2 Flow completed: item added to cart.
2025-05-24 16:51:58,208 - INFO - \U0001f50d Waiting for element '#nav-cart' to be clickable...
2025-05-24 16:51:58,898 - INFO - \u2705 Clicked on #nav-cart
2025-05-24 16:51:59,912 - INFO - \U0001f50d Waiting for element "input[name='proceedToRetailCheckout']" to be clickable...
2025-05-24 16:52:00,643 - INFO - \u2705 Clicked on input[name='proceedToRetailCheckout']
2025-05-24 16:52:01,647 - INFO - \U0001f7e2 Flow completed: item added to cart and proceeding to checkout.
2025-05-24 16:52:31,813 - ERROR - Unhandled error during automation: BrowserContext.close: Target page, context or browser has been closed
Traceback (most recent call last):
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\main.py", line 7, in <module>
    bot.run_purchase_flow(product_name="Pantalla 50 pulgadas")
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\automation\test_cases\comprar_bot.py", line 23, in run_purchase_flow
    with BaseBot(headless=False) as bot:
         ~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\automation\base_bot.py", line 37, in __exit__
    self.browser.close()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\sync_api\_generated.py", line 13485, in close
    return mapping.from_maybe_impl(self._sync(self._impl_obj.close(reason=reason)))
                                   ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_sync_base.py", line 115, in _sync
    return task.result()
           ~~~~~~~~~~~^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_browser_context.py", line 599, in close
    await self._channel.send("close", {"reason": reason})
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TargetClosedError: BrowserContext.close: Target page, context or browser has been closed
2025-05-24 20:42:33,460 - INFO - Starting the purchase flow...
2025-05-24 20:42:35,620 - INFO - Opening Amazon...
2025-05-24 20:42:36,426 - INFO - Navigated to URL: https://www.amazon.com.mx/
2025-05-24 20:42:37,429 - INFO - Clicking on the login button...
2025-05-24 20:42:37,429 - INFO - \U0001f50d Waiting for element '#nav-link-accountList' to be clickable...
2025-05-24 20:42:38,193 - INFO - \u2705 Clicked on #nav-link-accountList
2025-05-24 20:42:39,198 - INFO - Login
2025-05-24 20:42:39,718 - INFO - \U0001f4e7 Email entered.
2025-05-24 20:42:39,718 - INFO - \U0001f50d Waiting for element '#continue' to be clickable...
2025-05-24 20:42:40,259 - INFO - \u2705 Clicked on #continue
2025-05-24 20:42:41,931 - INFO - \U0001f512 Password entered.
2025-05-24 20:42:41,931 - INFO - \U0001f50d Waiting for element '#signInSubmit' to be clickable...
2025-05-24 20:42:42,515 - INFO - \u2705 Clicked on #signInSubmit
2025-05-24 20:42:42,515 - INFO - \u2705 Login process completed.
2025-05-24 20:42:43,530 - INFO - Verifying login...
2025-05-24 20:42:43,543 - INFO - Text found in '#nav-link-accountList': 'Hola projects Cuenta y Listas'
2025-05-24 20:42:43,543 - INFO - \u2705 Login confirmed. Label now shows: Hola projects Cuenta y Listas
2025-05-24 20:42:44,544 - INFO - Verify and Click on the hamburger menu...
2025-05-24 20:42:44,544 - INFO - \U0001f50d Waiting for element '#nav-hamburger-menu' to be clickable...
2025-05-24 20:42:45,171 - INFO - \u2705 Clicked on #nav-hamburger-menu
2025-05-24 20:42:46,181 - INFO - Clicking on the Electronics option...
2025-05-24 20:42:46,227 - INFO - \u2705 Clicked element with exact text: "Electrónicos"
2025-05-24 20:42:47,244 - INFO - \U0001f50d Trying to click "Televisión y Video" from hamburger menu...
2025-05-24 20:42:52,252 - WARNING - \u26a0\ufe0f Normal click failed for "Televisión y Video", retrying with force=True: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#hmenu-content a.hmenu-item").filter(has_text="Televisión y Video").first
    - locator resolved to <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
    - retrying click action
      - waiting 100ms
    10 × waiting for element to be visible, enabled and stable
       - element is visible, enabled and stable
       - scrolling into view if needed
       - done scrolling
       - <a class="hmenu-item" href="/gp/browse.html?node=9687925011&ref_=nav_em__tv_and_video_0_2_10_2">Televisión y Video\u21b5</a> from <div data-menu-id="10" data-parent-menu-id="1" class="hmenu hmenu-visible hmenu-translateX">…</div> subtree intercepts pointer events
     - retrying click action
       - waiting 500ms

2025-05-24 20:42:52,939 - INFO - \u2705 Forced click succeeded for "Televisión y Video"
2025-05-24 20:42:54,678 - INFO - \u2705 Clicked element with label: "DE 48" A 55""
2025-05-24 20:42:55,935 - INFO - \u2705 Clicked first product: "$7,990.00"
2025-05-24 20:42:56,941 - INFO - \U0001f50d Waiting for element '#add-to-cart-button' to be clickable...
2025-05-24 20:42:57,728 - INFO - \u2705 Clicked on #add-to-cart-button
2025-05-24 20:42:58,752 - INFO - \u2705 Warranty popup not visible.
2025-05-24 20:42:59,767 - INFO - \U0001f6d2 Product added to cart. Cart count: 5
2025-05-24 20:42:59,767 - INFO - \U0001f7e2 Flow completed: item added to cart.
2025-05-24 20:42:59,767 - INFO - \U0001f50d Waiting for element '#nav-cart' to be clickable...
2025-05-24 20:43:00,480 - INFO - \u2705 Clicked on #nav-cart
2025-05-24 20:43:01,486 - INFO - \U0001f50d Waiting for element "input[name='proceedToRetailCheckout']" to be clickable...
2025-05-24 20:43:02,220 - INFO - \u2705 Clicked on input[name='proceedToRetailCheckout']
2025-05-24 20:43:03,226 - INFO - \U0001f7e2 Flow completed: item added to cart and proceeding to checkout.
2025-05-24 20:43:15,605 - ERROR - Unhandled error during automation: BrowserContext.close: Target page, context or browser has been closed
Traceback (most recent call last):
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\main.py", line 7, in <module>
    bot.run_purchase_flow(product_name="Pantalla 50 pulgadas")
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\automation\test_cases\comprar_bot.py", line 23, in run_purchase_flow
    with BaseBot(headless=False) as bot:
         ~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\automation\base_bot.py", line 37, in __exit__
    self.browser.close()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\sync_api\_generated.py", line 13485, in close
    return mapping.from_maybe_impl(self._sync(self._impl_obj.close(reason=reason)))
                                   ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_sync_base.py", line 115, in _sync
    return task.result()
           ~~~~~~~~~~~^^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_browser_context.py", line 599, in close
    await self._channel.send("close", {"reason": reason})
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_connection.py", line 61, in send
    return await self._connection.wrap_api_call(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "C:\Users\Jhon Rodriguez\Documents\Repos\AT-WEB-DRIVER\venv\Lib\site-packages\playwright\_impl\_connection.py", line 528, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TargetClosedError: BrowserContext.close: Target page, context or browser has been closed
